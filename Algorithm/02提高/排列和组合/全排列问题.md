# æšä¸¾æ’åˆ—ï¼ˆé€’å½’å®ç°æ’åˆ—å‹æšä¸¾ï¼‰

## é¢˜ç›®æè¿°

ä»Šæœ‰ $n$ åå­¦ç”Ÿï¼Œè¦ä»ä¸­é€‰å‡º $k$ äººæ’æˆä¸€åˆ—æ‹ç…§ã€‚

è¯·æŒ‰å­—å…¸åºè¾“å‡ºæ‰€æœ‰å¯èƒ½çš„æ’åˆ—æ–¹å¼ã€‚
## è¾“å…¥æ ¼å¼

ä»…ä¸€è¡Œï¼Œä¸¤ä¸ªæ­£æ•´æ•° $n, k$ã€‚
## è¾“å‡ºæ ¼å¼

è‹¥å¹²è¡Œï¼Œæ¯è¡Œ $k$ ä¸ªæ­£æ•´æ•°ï¼Œè¡¨ç¤ºä¸€ç§å¯èƒ½çš„é˜Ÿä¼é¡ºåºã€‚
## æ ·ä¾‹ #1

### æ ·ä¾‹è¾“å…¥ #1

```
3 2
```

### æ ·ä¾‹è¾“å‡º #1

```
1 2
1 3
2 1
2 3
3 1
3 2
```

## æç¤º

å¯¹äº $100\%$ çš„æ•°æ®ï¼Œ$1 \leqslant k\leqslant n \leqslant 10$

## è§£æ³• 1ï¼ˆDFSï¼‰
```cpp
#include <bits/stdc++.h>
#define rep(i, n) for (int i = 0; i < (n); ++i)

using namespace std;

int main() {
    int n, k;
    cin >> n >> k;

    vector<bool> used(n + 1, false);
    auto dfs = [&](auto &f, vector<int> a) -> void {
        if (a.size() == k) {
            rep(i, k) cout << a[i] << " \n"[i == k - 1];
            return;
        }
        for (int x = 1; x <= n; ++x) {
            if (used[x])
                continue;
            used[x] = true;
            a.push_back(x);
            f(f, a);
            used[x] = false;
            a.pop_back();
        }
    };
    dfs(dfs, {});

    return 0;
}
```

### æ€è·¯
æˆ‘ä»¬ç›¸å½“äºå¯¹åŸæ¥çš„ $n$ ä¸ªæ•°çš„å…¨æ’åˆ—ç®—æ³•è¿›è¡Œäº†**å‰ªæ**ï¼Œå½“é€’å½’æ·±åº¦è¾¾åˆ° $k$ æ—¶å°±ç»“æŸé€’å½’ã€‚

### æ—¶é—´å¤æ‚åº¦åˆ†æ
å¯¹ $n$ ä¸ªæ•°çš„å…¨æ’åˆ—çš„æ—¶é—´å¤æ‚åº¦ä¸º $n!$ ï¼Œå¯ä»¥ä»ä¸¤ä¸ªæ–¹å‘è€ƒè™‘ï¼š
1. $n$ ä¸ªæ•°çš„å…¨æ’åˆ—ä¸€å…±æœ‰ $n!$ ä¸ªå¯èƒ½ï¼Œæ‰€ä»¥æ€»æ—¶é—´å¤æ‚åº¦ä¸º $n!$
2. è€ƒè™‘é€’å½’è¿‡ç¨‹ä¸ºä¸€ä¸ªé€’å½’æ ‘ï¼Œç¬¬äºŒå±‚ $n$ ä¸ªèŠ‚ç‚¹ï¼Œç¬¬ä¸‰å±‚ $n\cdot (n-1)$ ä¸ªèŠ‚ç‚¹ï¼Œç›´åˆ°ç¬¬ $n + 1$ å±‚ï¼Œæœ€åä¸€å±‚èŠ‚ç‚¹æ•°ä¸º $n\cdot (n-1) \cdot(n-2)\cdot(n-3)\cdots 1 = n!$

æ•…ï¼Œå¯¹äºæœ¬é¢˜æ¥è¯´æˆ‘ä»¬ä¹Ÿæœ‰ä¸¤ç§è€ƒè™‘æ€è·¯
1. ç”±é¢˜æ„å¯çŸ¥ï¼Œæˆ‘ä»¬é¦–å…ˆä» $n$ ä¸ªæ•°ä¸­é€‰æ‹© $k$ ä¸ªï¼Œç„¶åå°†è¿™ $k$ ä¸ªæ•°å…¨æ’åˆ—ã€‚æ—¶é—´å¤æ‚åº¦ä¹Ÿå°±æ˜¯
$$
	C^k_n\cdot k! =\dfrac{n!}{k!\cdot(n-k)!}\cdot k! = \dfrac{n!}{(n-k)!}
$$
2. å¯¹é€’å½’æ ‘è¿›è¡Œäº†å‰ªæï¼Œæ·±åº¦è¶…è¿‡ $k$ çš„å°±å‡æ‰ï¼Œæœ€åä¸€å±‚èŠ‚ç‚¹æ•°ä¸º 
$$
n \cdot (n-1) \cdot(n-2)\cdot(n-3)\cdots (n-k+1) = \dfrac{n!}{(n-k)!}
$$
å¦‚æœç®—ä¸Šé€’å½’æœ«å±‚çš„è¾“å‡ºæ“ä½œï¼Œåˆ™éœ€è¦ä¹˜ä¸Š $O(n)$
## è§£æ³• 2ï¼ˆpermutationï¼‰



```cpp
#include <iostream>
#include <vector>
#include <algorithm>

// Function to generate all k-permutations of n elements
void generate_k_permutations(const std::vector<int>& nums, int k) {
    int n = nums.size();
    std::vector<int> bitmask(k, 1); // First k elements are 1
    bitmask.resize(n, 0);           // Last n-k elements are 0
    
    do {
        // Extract k elements based on the bitmask
        std::vector<int> selected;
        for (int i = 0; i < n; ++i) {
            if (bitmask[i]) {
                selected.push_back(nums[i]);
            }
        }

        // Generate all permutations of the selected elements
        do {
            for (int num : selected) {
                std::cout << num << " ";
            }
            std::cout << std::endl;
        } while (std::next_permutation(selected.begin(), selected.end()));

    } while (std::prev_permutation(bitmask.begin(), bitmask.end()));
}

int main() {
    std::vector<int> nums;
    int n, k;
    std::cin >> n >> k;
    for (int i = 1; i<= n; i++) {
        nums.emplace_back(i);
    }

    generate_k_permutations(nums, k);

    return 0;
}
```

### æ€è·¯
é¦–å…ˆï¼Œæˆ‘æƒ³ä» `nums` ä¸­éšæœºé€‰æ‹© `k` ä¸ªæ•°ï¼Œç„¶åå†å¯¹è¿™ `k` ä¸ªæ•°è¿›è¡Œå…¨æ’åˆ—ã€‚æ‰€ä»¥æˆ‘æ„é€ äº†ä¸€ä¸ª `bitmask` æ•°ç»„ï¼Œè¯¥æ•°ç»„åªç”± `1` å’Œ `0` æ„æˆï¼Œä½œä¸º `nums` çš„é€‰æ‹©æ ‡è®°æ•°ç»„ï¼Œå¦‚æœ `bitmask[i]` ä¸º `1` åˆ™è¡¨ç¤º `nums[i]` è¢«é€‰ä¸­äº†ã€‚

é‚£ä¹ˆä¸€ä¸ªé•¿åº¦ä¸º `n` æ•°ç»„åªç”± `k` ä¸ª `1` å’Œ `n-k` ä¸ª `0` æ„æˆï¼Œå¯ä»¥æœ‰å¤šå°‘ç§ä¸åŒçš„ç»“æœå‘¢ï¼Ÿæ ¹æ®ç»„åˆæ•°å…¬å¼ï¼Œè¿™ç›¸å½“äºåœ¨ `n` ä¸ªç©ºä½ä¸Šé€‰æ‹© `k` ä¸ªä½ç½®ï¼Œä¹Ÿå°±æ˜¯æœ‰ $C^k_n$ ç§ç»“æœã€‚

### æ—¶é—´å¤æ‚åº¦åˆ†æ
æ¯ä¸€æ¬¡ `next_permutation`  éƒ½ä¼šç”Ÿæˆä¸€ä¸ªå­—å…¸åºæ¯”å½“å‰æ’åˆ—å¤§çš„åºåˆ—ï¼Œå¯¹äº `k` ä¸ª 1 å’Œ `n-k` ä¸ª `0` æ¥è¯´ï¼Œä¸€å…±ä¼šç”Ÿæˆ $C^k_n$ æ¬¡ï¼Œæ¯ä¸€æ¬¡ç”Ÿæˆéœ€è¦ $O(n)$ æ—¶é—´ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º $O(n\cdot C^k_n)$ï¼Œç„¶åéœ€è¦å¯¹è¿™ `k` ä¸ªæ•°è¿›è¡Œå…¨æ’åˆ—ï¼Œä¸€å…± $k!$ æ¬¡ï¼Œæ€»è®¡æ—¶é—´å¤æ‚åº¦ä¸º
	$$
	n\cdot C^k_n\cdot n\cdot k! =n^2\cdot \dfrac{n!}{k!\cdot(n-k)!}\cdot k! =n^2\cdot \dfrac{n!}{(n-k)!}
	$$


## Extra
Gosper's Hack ç®—æ³•ï¼šä¸€ç§ç”ŸæˆÂ ğ‘›Â å…ƒé›†åˆæ‰€æœ‰Â ğ‘˜Â å…ƒå­é›†çš„ç®—æ³•ï¼Œå®ƒå·§å¦™åœ°åˆ©ç”¨äº†ä½è¿ç®—

[ç®—æ³•å­¦ä¹ ç¬”è®°(75): Gosper's Hack - çŸ¥ä¹ (zhihu.com)](https://zhuanlan.zhihu.com/p/360512296)