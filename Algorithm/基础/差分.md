>[!note] 前缀和的逆操作
> 前缀和可以很方便进行**区间查询**，但是**区间修改**就不方便了

对于原数组 $a_1, a_2, a_3,\dots a_n$，我们构造差分数组 $d_1, d_2, d_3,\dots d_n$
其中
$$
\begin{align}
d_1 &=a_1 \\
d_2 &=a_2 - a_1 \\
d_3 &= a_3 - a_2 \\
&\dots \\
d_n&=a_n -a_{n-1}
\end{align}
$$
所以
$$
\begin{align}
a_1 &= d_1 \\
a_2 &= d_2 + d_1 \\
a_3 &= d_3 + d_2 + d_1 \\
&\dots \\
a_n &= d_n + d_{n-1} + \dots + d_2 + d_1
\end{align}
$$
也就是说，原数组是差分数组的前缀和。
这样我们可以在 $O(1)$ 时间内在差分数组上进行**区间修改**操作，例如，让 $[l,r]$ 内的所有元素加上 $c$，只需要
$$
\begin{align}
d_l &= d_l + c \\
d_{r + 1} &= d_{r + 1} -c
\end{align}
$$
这样最后进行前缀和求得**区间修改**后的数组后，$[l,r]$ 内的元素都会加上 c，然后 $d_{r+1} = d_{r + 1} - c$ 就会抵消掉，所以 $[r,n]$ 的不变